<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åšå®¢åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 3px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>åšå®¢åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>å¯¼èˆªæµ‹è¯•</h2>
        <button class="test-button" onclick="testNavigation('home')">é¦–é¡µ</button>
        <button class="test-button" onclick="testNavigation('categories')">åˆ†ç±»</button>
        <button class="test-button" onclick="testNavigation('tags')">æ ‡ç­¾</button>
        <button class="test-button" onclick="testNavigation('friends')">å‹é“¾</button>
        <button class="test-button" onclick="testNavigation('coding-time')">Coding Time</button>
        <button class="test-button" onclick="testNavigation('about')">å…³äº</button>
        <div id="nav-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>æ•°æ®æµ‹è¯•</h2>
        <button class="test-button" onclick="testBlogData()">æ£€æŸ¥åšå®¢æ•°æ®</button>
        <button class="test-button" onclick="testFriendLinks()">æ£€æŸ¥å‹æƒ…é“¾æ¥</button>
        <button class="test-button" onclick="testSettings()">æ£€æŸ¥è®¾ç½®</button>
        <div id="data-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>åŠŸèƒ½æµ‹è¯•</h2>
        <button class="test-button" onclick="testCategoriesFilter()">åˆ†ç±»è¿‡æ»¤</button>
        <button class="test-button" onclick="testTagsFilter()">æ ‡ç­¾è¿‡æ»¤</button>
        <button class="test-button" onclick="testSearch()">æœç´¢åŠŸèƒ½</button>
        <div id="function-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>GitHubç»Ÿè®¡æµ‹è¯•</h2>
        <button class="test-button" onclick="testGitHubStats()">æµ‹è¯•GitHub API</button>
        <div id="github-result" class="result"></div>
    </div>

    <script>
        // åŠ è½½ä¸»åšå®¢è„šæœ¬
        function loadMainBlog() {
            return new Promise((resolve) => {
                const script = document.createElement('script');
                script.src = 'index.html';
                script.onload = resolve;
                document.head.appendChild(script);
            });
        }

        function testNavigation(page) {
            const result = document.getElementById('nav-result');
            try {
                if (typeof window.blog !== 'undefined') {
                    window.blog.showPage(page);
                    result.innerHTML = `âœ… æˆåŠŸå¯¼èˆªåˆ°: ${page}`;
                } else {
                    result.innerHTML = `âŒ åšå®¢å®ä¾‹æœªæ‰¾åˆ°ï¼Œè¯·å…ˆæ‰“å¼€ index.html`;
                }
            } catch (error) {
                result.innerHTML = `âŒ å¯¼èˆªå¤±è´¥: ${error.message}`;
            }
        }

        function testBlogData() {
            const result = document.getElementById('data-result');
            try {
                const data = localStorage.getItem('blogData');
                if (data) {
                    const blogData = JSON.parse(data);
                    result.innerHTML = `âœ… åšå®¢æ•°æ®å­˜åœ¨<br>
                        - æ–‡ç« æ•°é‡: ${blogData.posts?.length || 0}<br>
                        - ä½œè€…: ${blogData.settings?.author || 'æœªè®¾ç½®'}<br>
                        - GitHub: ${blogData.settings?.github || 'æœªè®¾ç½®'}<br>
                        - ORCID: ${blogData.settings?.orcid || 'æœªè®¾ç½®'}`;
                } else {
                    result.innerHTML = `âŒ æœªæ‰¾åˆ°åšå®¢æ•°æ®`;
                }
            } catch (error) {
                result.innerHTML = `âŒ æ•°æ®è§£æå¤±è´¥: ${error.message}`;
            }
        }

        function testFriendLinks() {
            const result = document.getElementById('data-result');
            try {
                const data = localStorage.getItem('blogData');
                if (data) {
                    const blogData = JSON.parse(data);
                    const friendLinks = blogData.friendLinks || [];
                    result.innerHTML = `âœ… å‹æƒ…é“¾æ¥æ•°æ®<br>
                        - é“¾æ¥æ•°é‡: ${friendLinks.length}<br>
                        ${friendLinks.map(link => `- ${link.name}: ${link.url}`).join('<br>')}`;
                } else {
                    result.innerHTML = `âŒ æœªæ‰¾åˆ°å‹æƒ…é“¾æ¥æ•°æ®`;
                }
            } catch (error) {
                result.innerHTML = `âŒ å‹é“¾æ•°æ®è§£æå¤±è´¥: ${error.message}`;
            }
        }

        function testSettings() {
            const result = document.getElementById('data-result');
            try {
                const data = localStorage.getItem('blogData');
                if (data) {
                    const blogData = JSON.parse(data);
                    const settings = blogData.settings || {};
                    result.innerHTML = `âœ… è®¾ç½®æ•°æ®<br>
                        - æ ‡é¢˜: ${settings.title || 'æœªè®¾ç½®'}<br>
                        - æè¿°: ${settings.description || 'æœªè®¾ç½®'}<br>
                        - ä½œè€…: ${settings.author || 'æœªè®¾ç½®'}<br>
                        - é‚®ç®±: ${settings.email || 'æœªè®¾ç½®'}<br>
                        - GitHub: ${settings.github || 'æœªè®¾ç½®'}<br>
                        - ORCID: ${settings.orcid || 'æœªè®¾ç½®'}`;
                } else {
                    result.innerHTML = `âŒ æœªæ‰¾åˆ°è®¾ç½®æ•°æ®`;
                }
            } catch (error) {
                result.innerHTML = `âŒ è®¾ç½®æ•°æ®è§£æå¤±è´¥: ${error.message}`;
            }
        }

        function testCategoriesFilter() {
            const result = document.getElementById('function-result');
            result.innerHTML = `â„¹ï¸ åˆ†ç±»è¿‡æ»¤åŠŸèƒ½éœ€è¦åœ¨ä¸»åšå®¢é¡µé¢ä¸­æµ‹è¯•`;
        }

        function testTagsFilter() {
            const result = document.getElementById('function-result');
            result.innerHTML = `â„¹ï¸ æ ‡ç­¾è¿‡æ»¤åŠŸèƒ½éœ€è¦åœ¨ä¸»åšå®¢é¡µé¢ä¸­æµ‹è¯•`;
        }

        function testSearch() {
            const result = document.getElementById('function-result');
            result.innerHTML = `â„¹ï¸ æœç´¢åŠŸèƒ½éœ€è¦åœ¨ä¸»åšå®¢é¡µé¢ä¸­æµ‹è¯•`;
        }

        function testGitHubStats() {
            const result = document.getElementById('github-result');
            const username = 'zjncs';
            
            result.innerHTML = `ğŸ”„ æ­£åœ¨æµ‹è¯•GitHub API...`;
            
            // æµ‹è¯•GitHub API
            const testUrls = [
                `https://github-readme-stats.vercel.app/api?username=${username}&theme=transparent&show_icons=true`,
                `https://streak-stats.demolab.com?user=${username}`,
                `https://github-readme-activity-graph.vercel.app/graph?username=${username}&theme=github-compact`,
                `https://github-profile-trophy.vercel.app/?username=${username}&no-bg=true&no-frame=true&theme=algolia`,
                `https://go-skill-icons.vercel.app/api/icons?i=java,py,cpp,md,latex,matlab&titles=true`
            ];
            
            let loadedCount = 0;
            const totalCount = testUrls.length;
            
            testUrls.forEach((url, index) => {
                const img = new Image();
                img.onload = () => {
                    loadedCount++;
                    if (loadedCount === totalCount) {
                        result.innerHTML = `âœ… æ‰€æœ‰GitHubç»Ÿè®¡APIéƒ½å¯ä»¥æ­£å¸¸è®¿é—®`;
                    }
                };
                img.onerror = () => {
                    result.innerHTML = `âŒ éƒ¨åˆ†GitHub APIæ— æ³•è®¿é—®`;
                };
                img.src = url;
            });
            
            setTimeout(() => {
                if (loadedCount < totalCount) {
                    result.innerHTML = `âš ï¸ éƒ¨åˆ†APIå“åº”è¾ƒæ…¢ï¼Œå·²åŠ è½½ ${loadedCount}/${totalCount}`;
                }
            }, 5000);
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•æ•°æ®
        window.addEventListener('load', () => {
            testBlogData();
        });
    </script>
</body>
</html>
